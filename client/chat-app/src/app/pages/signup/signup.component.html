<div class="signup-container">
  <div class="signup-card">
    <h2>Crear Cuenta</h2>

    <form (ngSubmit)="onSubmit()">
      <!-- Imagen de perfil -->
      <div class="form-group text-center">
        <div class="image-preview" (click)="fileInput.click()">
          @if (imagePreview) {
            <img [src]="imagePreview" alt="Preview">
          } @else {
            <div class="placeholder">
              <span>+</span>
              <small>Foto (opcional)</small>
            </div>
          }
        </div>
        <input
          type="file"
          #fileInput
          (change)="onImageSelected($event)"
          accept="image/*"
          hidden
        >
      </div>

      <div class="row">
        <div class="col-6">
          <div class="form-group">
            <label>Nombre</label>
            <input
              type="text"
              [(ngModel)]="formData.first_name"
              name="first_name"
              class="form-control"
              required
            >
          </div>
        </div>
        <div class="col-6">
          <div class="form-group">
            <label>Apellido</label>
            <input
              type="text"
              [(ngModel)]="formData.last_name"
              name="last_name"
              class="form-control"
              required
            >
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Usuario</label>
        <input
          type="text"
          [(ngModel)]="formData.username"
          name="username"
          class="form-control"
          required
        >
      </div>

      <div class="form-group">
        <label>Email</label>
        <input
          type="email"
          [(ngModel)]="formData.email"
          name="email"
          class="form-control"
          required
        >
      </div>

      <div class="form-group">
        <label>Contrasena</label>
        <input
          type="password"
          [(ngModel)]="formData.password"
          name="password"
          class="form-control"
          required
        >
      </div>

      <div class="form-group">
        <label>Confirmar Contrasena</label>
        <input
          type="password"
          [(ngModel)]="formData.passwordTwo"
          name="passwordTwo"
          class="form-control"
          required
        >
      </div>

      @if (error) {
        <div class="alert alert-danger">{{ error }}</div>
      }

      <button
        type="submit"
        class="btn btn-primary w-100"
        [disabled]="loading"
      >
        {{ loading ? 'Registrando...' : 'Crear Cuenta' }}
      </button>
    </form>

    <p class="mt-3 text-center">
      Ya tienes cuenta? <a routerLink="/login">Iniciar Sesion</a>
    </p>
  </div>
</div>
